import{a as f,t as b}from"../chunks/BlwcFkRs.js";import{i as D}from"../chunks/DqT8BD1v.js";import{p as J,a as V,s as n,c as a,t as u,r,g as i,b as z,m as B}from"../chunks/mc_8HRgA.js";import{e as G,s as $}from"../chunks/CyaPlrUR.js";import{e as S,i as k,g as v,A as H,a as N,r as j,Z as K}from"../chunks/28jdvDwc.js";import{s as E}from"../chunks/CVP9QBGC.js";import{s as M,a as P}from"../chunks/DwwM9ilA.js";var Q=b('<tr class="odd-rows"><td class="pl-1 pr-2"> </td><td><a class="block text-left whitespace-nowrap overflow-hidden text-ellipsis opaque button-default no-underline normal-color">Edit</a></td><td><a class="block text-left whitespace-nowrap overflow-hidden text-ellipsis opaque button-default no-underline normal-color">View</a></td></tr>'),R=b("<div> </div>"),W=b('<div class="mx-auto max-w-prose"><h1>Toy Soldier Lists</h1> <table class="mt-2"><tbody><!><tr><td colspan="3"><hr></td></tr><tr><td colspan="3"><label class="button-default inline-block cursor-pointer relative">Import From File <input class="w-0 opacity-0 text-sm text-left block absolute top-0 left-0" type="file" accept=".json"></label></td></tr></tbody></table> <!></div>');function ot(I,L){J(L,!1);const[O,T]=M(),q=()=>P(N,"$armiesStore",O);let d=B([]);D();var c=W(),p=n(a(c),2),h=a(p),_=a(h);S(_,1,()=>Object.entries(q()).sort((o,t)=>{const e=v(o[1]),s=v(t[1]);return e.localeCompare(s)}),k,(o,t,e)=>{var s=Q(),l=a(s),U=a(l,!0);u(()=>$(U,v(i(t)[1],e))),r(l);var m=n(l),Z=a(m);r(m);var g=n(m),C=a(g);r(g),r(s),u(()=>{E(Z,"href",`/editor/${i(t)[0]??""}`),E(C,"href",`/viewer/${i(t)[0]??""}`)}),f(o,s)});var w=n(_,2),x=a(w),y=a(x),A=n(a(y));r(y),r(x),r(w),r(h),r(p);var F=n(p,2);S(F,1,()=>i(d),k,(o,t)=>{var e=R(),s=a(e,!0);r(e),u(()=>$(s,i(t))),f(o,e)}),r(c),G("change",A,async o=>{if(z(d,[]),o.currentTarget.files)for(const t of[...o.currentTarget.files])try{const e=H.parse(JSON.parse(await t.text()));N.update(s=>{let l=j();for(;Object.keys(s).includes(l);)l=j();return{...s,[l]:e}})}catch(e){e instanceof K?i(d).push(`${t.name} doesn't contain an army`):i(d).push(`Error when loading ${t.name}`)}}),f(I,c),V(),T()}export{ot as component};
